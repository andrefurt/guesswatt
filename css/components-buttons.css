/**
 * Button Components - Design System Implementation
 * 
 * Pixel-perfect match to design.html button styles
 * Includes: Default buttons, Segmented buttons, Copy button with blur transition, Submit button
 */

@layer components {
  /* ═══════════════════════════════════════════════════════════
     SHARED BASE COMPONENT - Interactive Elements
     Base class for buttons, tabs, pills, labels, chips
     All share the same visual foundation
     ═══════════════════════════════════════════════════════════ */
  
  .interactive-base {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-3) var(--space-5) var(--space-3) var(--space-4);
    border: 0.5px solid white;
    border-radius: var(--radius-sm);
    background: transparent;
    box-shadow: var(--shadow-xs);
    cursor: pointer;
    font-family: var(--font-sans);
    font-weight: var(--font-medium);
    font-size: var(--text-base-size);
    line-height: var(--text-default-leading);
    color: var(--color-foreground-primary);
    transition: transform var(--duration-normal) var(--ease-bounce);
    -webkit-tap-highlight-color: transparent;
    text-decoration: none;
    user-select: none;
    -webkit-user-select: none;
  }
  
  .interactive-base:active {
    transform: scale(0.97);
  }
  
  .interactive-base span {
    text-decoration: none;
    user-select: none;
    -webkit-user-select: none;
  }
  
  /* If interactive-base is an <a> tag */
  a.interactive-base,
  a.interactive-base:hover,
  a.interactive-base:visited,
  a.interactive-base:active {
    text-decoration: none;
  }
  
  /* ═══════════════════════════════════════════════════════════
     BUTTON SLOT (Container)
     ═══════════════════════════════════════════════════════════ */
  
  .btn-slot {
    border: 0.5px solid var(--color-border-default);
    border-radius: var(--radius-sm);
  }
  
  /* Child elements inside btn-slot should have calculated border-radius */
  .btn-slot > * {
    border-radius: calc(var(--radius-sm) - 0.5px); /* Parent radius - border */
  }
  
  /* ═══════════════════════════════════════════════════════════
     BASE BUTTON - Uses interactive-base styles
     ═══════════════════════════════════════════════════════════ */
  
  .btn {
    /* Apply all interactive-base styles directly */
    display: flex;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-3) var(--space-5) var(--space-3) var(--space-4);
    border: 0.5px solid white;
    border-radius: var(--radius-sm);
    background: transparent;
    box-shadow: var(--shadow-xs);
    cursor: pointer;
    font-family: var(--font-sans);
    font-weight: var(--font-medium);
    font-size: var(--text-base-size);
    line-height: var(--text-default-leading);
    color: var(--color-foreground-primary);
    transition: transform var(--duration-normal) var(--ease-bounce);
    -webkit-tap-highlight-color: transparent;
    text-decoration: none;
    user-select: none;
    -webkit-user-select: none;
  }
  
  .btn:active {
    transform: scale(0.97);
  }
  
  .btn span {
    text-decoration: none;
    user-select: none;
    -webkit-user-select: none;
  }
  
  /* If button is an <a> tag */
  a.btn,
  a.btn:hover,
  a.btn:visited,
  a.btn:active {
    text-decoration: none;
  }
  
  .btn-icon {
    width: var(--text-base-size);
    height: var(--text-base-size);
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  /* Phosphor Duotone icons styling */
  .btn-icon i,
  .btn-icon .ph-duotone {
    font-size: var(--text-base-size);
    width: var(--text-base-size);
    height: var(--text-base-size);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    color: inherit;
  }
  
  /* Legacy SVG support (if any remain) */
  .btn-icon svg {
    width: var(--text-base-size);
    height: var(--text-base-size);
  }
  
  /* ═══════════════════════════════════════════════════════════
     SEGMENTED BUTTON
     ═══════════════════════════════════════════════════════════ */
  
  /* Segmented button - the container */
  .segmented-btn {
    display: flex;
    align-items: center;
    border: 0.5px solid white;
    border-radius: var(--radius-sm);
    box-shadow: var(--shadow-xs);
    position: relative;
  }
  
  /* Child buttons inside segmented-btn inherit parent's border-radius calculation */
  .segmented-btn > * {
    border-radius: calc(var(--radius-sm) - 0.5px); /* Parent radius - border */
  }
  
  /* Copy button inside segmented - needs FULL padding */
  .segmented-btn .copy-btn {
    padding: var(--space-3) var(--space-5) var(--space-3) var(--space-4); /* Full padding, not reduced */
    border: none;
    box-shadow: none;
  }
  
  /* Remove the generic override that breaks copy button */
  /* .segmented-btn .btn { padding: 0.375rem 0.5rem; } - DELETED */
  
  /* Divider */
  .segmented-divider {
    width: 0.5px;
    height: var(--text-default-leading);
    background: var(--color-border-default);
  }
  
  /* Dropdown trigger suffix button - square */
  .btn-suffix {
    display: flex;
    align-items: center;
    justify-content: center;
    width: var(--space-8);
    height: var(--space-8);
    padding: 0;
    border: none;
    box-shadow: none;
  }
  
  /* ═══════════════════════════════════════════════════════════
     COPY BUTTON - Blur Transition (Emil Kowalski style)
     ═══════════════════════════════════════════════════════════ */
  
  .copy-btn {
    position: relative;
    overflow: hidden;
    min-width: 6.25rem; /* 100px - fixed width for consistency */
    user-select: none;
    -webkit-user-select: none;
  }
  
  .copy-btn-content {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    transition: 
      opacity var(--duration-normal) var(--ease-bounce),
      filter var(--duration-normal) var(--ease-bounce),
      transform var(--duration-normal) var(--ease-bounce);
  }
  
  .copy-btn-default,
  .copy-btn-copied {
    display: flex;
    align-items: center;
    gap: var(--space-1);
  }
  
  .copy-btn-default span,
  .copy-btn-copied span {
    user-select: none;
    -webkit-user-select: none;
  }
  
  .copy-btn-copied {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    opacity: 0;
    filter: blur(4px); /* Fixed blur value - not responsive */
    color: var(--color-accent-green);
  }
  
  .copy-btn-copied .btn-icon svg path,
  .copy-btn-copied .btn-icon svg polyline {
    stroke: var(--color-accent-green);
  }
  
  /* Copied state */
  .copy-btn.copied .copy-btn-default {
    opacity: 0;
    filter: blur(4px); /* Fixed blur value - not responsive */
    transform: scale(0.95);
  }
  
  .copy-btn.copied .copy-btn-copied {
    opacity: 1;
    filter: blur(0);
    transform: translate(-50%, -50%) scale(1);
  }
  
  /* ═══════════════════════════════════════════════════════════
     DROPDOWN
     ═══════════════════════════════════════════════════════════ */
  
  .dropdown-wrapper {
    position: relative;
  }
  
  .dropdown-trigger {
    transition: transform var(--duration-normal) var(--ease-bounce);
  }
  
  .dropdown-trigger:active {
    transform: scale(0.94);
  }
  
  /* Chevron rotation */
  .dropdown-trigger .btn-icon {
    transition: transform var(--duration-slower) var(--ease-spring);
  }
  
  .dropdown-wrapper.open .dropdown-trigger .btn-icon {
    transform: rotate(180deg);
  }
  
  .dropdown-menu {
    position: absolute;
    top: calc(100% + var(--space-3));
    right: 0;
    min-width: 11.25rem; /* 180px - fixed width for dropdown */
    background: var(--color-bg-dropdown);
    border: 0.5px solid var(--color-border-subtle);
    border-radius: var(--radius-sm);
    box-shadow: var(--shadow-lg);
    padding: var(--space-1);
    opacity: 0;
    pointer-events: none;
    transform: scale(0.95);
    transform-origin: top right;
    transition: 
      opacity var(--duration-slow) var(--ease-out),
      transform var(--duration-slow) var(--ease-out);
    z-index: var(--z-dropdown);
  }
  
  /* Dropdown items have calculated border-radius based on parent padding */
  .dropdown-item {
    border-radius: calc(var(--radius-sm) - var(--space-1)); /* Parent radius - padding */
  }
  
  .dropdown-wrapper.open .dropdown-menu {
    opacity: 1;
    pointer-events: auto;
    transform: scale(1);
  }
  
  .dropdown-item {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    width: 100%;
    padding: var(--space-4) var(--space-5);
    border: none;
    background: transparent;
    border-radius: var(--radius-sm);
    font-family: var(--font-sans);
    font-weight: var(--font-medium);
    font-size: var(--text-sm-size);
    color: var(--color-foreground-primary);
    cursor: pointer;
    text-align: left;
    transition: background var(--duration-fast) var(--ease-out);
    user-select: none;
    -webkit-user-select: none;
  }
  
  .dropdown-item span {
    user-select: none;
    -webkit-user-select: none;
  }
  
  .dropdown-item:hover {
    background: var(--color-border-subtle);
  }
  
  .dropdown-item:active {
    background: rgba(0, 0, 0, 0.1);
    transition: background var(--duration-instant);
  }
  
  .dropdown-item .item-icon {
    width: var(--space-4);
    height: var(--space-4);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }
  
  /* Phosphor Duotone icons styling */
  .dropdown-item .item-icon i,
  .dropdown-item .item-icon .ph-duotone {
    font-size: var(--space-4);
    width: var(--space-4);
    height: var(--space-4);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    color: inherit;
  }
  
  /* Legacy SVG support */
  .dropdown-item .item-icon svg {
    width: var(--space-4);
    height: var(--space-4);
  }
  
  /* ═══════════════════════════════════════════════════════════
     SUBMIT BUTTON
     ═══════════════════════════════════════════════════════════ */
  
  .submit-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-3);
    padding: var(--space-3) var(--space-6);
    background-color: var(--color-foreground-primary);
    border: none;
    border-radius: var(--radius-sm);
    box-shadow: var(--shadow-button);
    cursor: pointer;
    font-family: var(--font-sans);
    font-weight: var(--font-medium);
    font-size: var(--text-base-size);
    line-height: var(--text-default-leading);
    color: var(--color-text-white);
    position: relative;
    overflow: hidden;
    transition: transform var(--duration-normal) var(--ease-bounce);
    -webkit-tap-highlight-color: transparent;
    user-select: none;
    -webkit-user-select: none;
  }
  
  .submit-btn:active {
    transform: scale(0.97);
  }
  
  .submit-btn::after {
    content: '';
    position: absolute;
    inset: 0;
    box-shadow: var(--shadow-button-inset, 0px 1px 0px 0px inset rgba(255, 255, 255, 0.25));
    pointer-events: none;
  }
}

