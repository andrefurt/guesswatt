<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sobre - GuessWatt</title>
  <style>
    /* Minimal functional styles only - no visual decoration */
    
    .dropdown-menu {
      display: none;
    }
    
    .dropdown-menu.is-open {
      display: block;
    }
    
    /* Functional cursor styles */
    button {
      cursor: pointer;
    }
    
    /* Accessibility: ensure focusable elements are visible */
    button:focus-visible,
    a:focus-visible {
      outline: 2px solid currentColor;
      outline-offset: 2px;
    }
  </style>
</head>
<body>
  <div id="app-root">
    <!-- Header -->
    <header>
      <a href="index.html" id="topbar-logo">GuessWatt</a>
      <nav>
        <a href="sobre.html">Sobre</a>
        <div class="dropdown">
          <button type="button" id="copy-page-button">
            Copy Page ▾
          </button>
          <div class="dropdown-menu" id="copy-page-menu">
            <a href="#" id="copy-markdown">Copy as Markdown</a>
            <a href="llms.txt" target="_blank">View llms.txt</a>
            <a href="#" id="open-chatgpt">Open in ChatGPT</a>
            <a href="#" id="open-claude">Open in Claude</a>
          </div>
        </div>
      </nav>
    </header>
  
    <!-- Main content -->
    <main>
      <section aria-labelledby="page-title">
        <a href="index.html">← Voltar</a>
        <h1 id="page-title">Sobre o GuessWatt</h1>
      </section>

      <section aria-labelledby="what-is">
        <h2 id="what-is">O que é</h2>
        <p>O GuessWatt compara tarifas de eletricidade em Portugal. Mostras quanto pagas, nós dizemos se estás a pagar demais e qual a melhor alternativa.</p>
        <p>Não somos uma empresa de energia. Não vendemos nada. Não ganhamos comissões.</p>
      </section>
      
      <section aria-labelledby="why">
        <h2 id="why">Porquê</h2>
        <p>Portugal tem um mercado livre de eletricidade desde 2006. Existem mais de 40 comercializadores e centenas de tarifas diferentes. A maioria das pessoas fica no mesmo fornecedor durante anos sem comparar — e perde dinheiro.</p>
        <p>Mudar de fornecedor é gratuito, demora menos de uma semana, e não requer qualquer intervenção técnica. Mas quase ninguém o faz.</p>
        <p>O GuessWatt existe para quebrar essa inércia.</p>
      </section>
      
      <section aria-labelledby="how-calculate">
        <h2 id="how-calculate">Como calculamos</h2>
        <p>Usamos os dados oficiais da <a href="https://www.erse.pt" target="_blank" rel="noopener">ERSE</a> (Entidade Reguladora dos Serviços Energéticos), a mesma fonte usada pelo simulador oficial.</p>
        <p>Para cada tarifa, calculamos:</p>
        <ul>
          <li>Termo fixo (€/dia) × 30 dias</li>
          <li>Termo variável (€/kWh) × consumo mensal</li>
          <li>Taxas (audiovisual, IEC)</li>
          <li>IVA a 23%</li>
        </ul>
        <p>Comparamos todas as ofertas disponíveis para o teu perfil e ordenamos por custo mensal.</p>
      </section>
      
      <section aria-labelledby="data-source">
        <h2 id="data-source">Fonte dos dados</h2>
        <p>Os dados vêm directamente da <a href="https://www.erse.pt" target="_blank" rel="noopener">ERSE</a>:</p>
        <ul>
          <li>Preços por tarifa, potência e tipo de contagem</li>
          <li>Condições comerciais (fidelização, contactos, links)</li>
        </ul>
        <p>Actualizamos mensalmente quando a <a href="https://www.erse.pt" target="_blank" rel="noopener">ERSE</a> publica novos dados.</p>
      </section>
      
      <section aria-labelledby="limitations">
        <h2 id="limitations">Limitações</h2>
        <ul>
          <li>Estimativas baseadas em consumo médio podem variar ±15% do real</li>
          <li>Tarifas indexadas (preço variável) não são comparáveis directamente</li>
          <li>Algumas ofertas têm condições especiais não reflectidas nos dados</li>
        </ul>
        <p>Para maior precisão, usa a tua factura real.</p>
      </section>
      
      <section aria-labelledby="who">
        <h2 id="who">Quem faz isto</h2>
        <p>Projecto pessoal de Andrefurt. Código aberto, sem fins lucrativos.</p>
        <p>Sugestões ou correcções: <a href="https://github.com/andrefurt/guesswatt" target="_blank" rel="noopener">github.com/andrefurt/guesswatt</a></p>
      </section>
    </main>
  
    <!-- Footer -->
    <footer id="footer">
      <p>Guesswatt compara tarifas de eletricidade em Portugal. Não somos uma empresa de energia.</p>
      <p>Não vendemos nada. Dados: <a href="https://www.erse.pt" target="_blank" rel="noopener">ERSE</a> (atualizado mensalmente)</p>
      <p>↻ Última actualização foi em <span id="last-update-month"></span> de <span id="last-update-year"></span></p>
      <p><a href="llms.txt">llms.txt</a></p>
    </footer>
  </div>
  
  <script>
    // Load last update date
    async function loadLastUpdate() {
      try {
        const response = await fetch('data/last-update.json');
        const data = await response.json();
        document.getElementById('last-update-month').textContent = data.month;
        document.getElementById('last-update-year').textContent = data.year;
      } catch (error) {
        console.error('Error loading last update:', error);
      }
    }
    
    // Dropdown toggle
    const copyPageButton = document.getElementById('copy-page-button');
    const copyPageMenu = document.getElementById('copy-page-menu');
    
    if (copyPageButton && copyPageMenu) {
      copyPageButton.addEventListener('click', (e) => {
        e.stopPropagation();
        copyPageMenu.classList.toggle('is-open');
      });
      
      // Close dropdown when clicking outside
      document.addEventListener('click', (e) => {
        if (!e.target.closest('.dropdown')) {
          copyPageMenu.classList.remove('is-open');
        }
      });
    }
    
    // Copy Page functionality
    const copyMarkdown = document.getElementById('copy-markdown');
    const openChatGPT = document.getElementById('open-chatgpt');
    const openClaude = document.getElementById('open-claude');
    
    // Determine which markdown file to use based on current page
    const isAboutPage = window.location.pathname.includes('sobre');
    const markdownFile = isAboutPage ? 'sobre.md' : 'index.md';
    
    // Copy as Markdown - fetch and copy to clipboard
    if (copyMarkdown && copyPageMenu) {
      copyMarkdown.addEventListener('click', async (e) => {
        e.preventDefault();
        try {
          const response = await fetch(markdownFile);
          const text = await response.text();
          await navigator.clipboard.writeText(text);
          
          // Visual feedback
          const originalText = copyMarkdown.textContent;
          copyMarkdown.textContent = '✓ Copied!';
          setTimeout(() => {
            copyMarkdown.textContent = originalText;
          }, 2000);
        } catch (err) {
          console.error('Failed to copy:', err);
        }
        copyPageMenu.classList.remove('is-open');
      });
    }
    
    // Open in ChatGPT
    let basePath = window.location.pathname.replace(/\/[^/]*$/, '') || '';
    basePath = basePath.replace(/\/+$/, ''); // Remove trailing slashes
    const llmsUrl = window.location.origin + basePath + '/llms.txt';
    const prompt = encodeURIComponent(`Use this documentation to answer questions about GuessWatt: ${llmsUrl}`);
    
    if (openChatGPT && copyPageMenu) {
      openChatGPT.addEventListener('click', (e) => {
        e.preventDefault();
        window.open(`https://chatgpt.com/?q=${prompt}`, '_blank');
        copyPageMenu.classList.remove('is-open');
      });
    }
    
    // Open in Claude
    if (openClaude && copyPageMenu) {
      openClaude.addEventListener('click', (e) => {
        e.preventDefault();
        window.open(`https://claude.ai/new?q=${prompt}`, '_blank');
        copyPageMenu.classList.remove('is-open');
      });
    }
    
    // Load last update on page load
    loadLastUpdate();
  </script>
</body>
</html>
